define("filter_multilang2/filter",["exports","jquery","core/ajax","core_filters/events"],(function(_exports,_jquery,_ajax,_events){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * TODO describe module filter
   *
   * @module     filter_multilang2/filter
   * @copyright  2025 Mohammad Farouk <phun.for.physics@gmail.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_ajax=_interopRequireDefault(_ajax);let retryInterval,elements=[],data=[],onRequest=!1,queue=[];function runInterval(){clearInterval(retryInterval),retryInterval=setInterval(processQueue,500)}function processQueue(){if(clearInterval(retryInterval),0==queue.length)return;if(onRequest)return void runInterval();let item;for(let i=0;i<queue.length;i++)if(item=queue[i],item.done)queue.splice(i,1);else{if(item.event)break;item=null}item&&(runInterval(),filter(item.event))}async function filter(event){if(onRequest)return void function(){let event=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;queue.push({event:event,done:!1}),runInterval()}(event);onRequest=!0;let selector,contextid=M.cfg.contextid;selector=event&&event.originalEvent&&event.originalEvent.detail.nodes?event.originalEvent.detail.nodes:["body"],_jquery.default.each(selector,(function(index,element){(0,_jquery.default)(element).parent().children().find("*").not("script, link, noscript, iframe, embed, input, head, textarea").each((function(){let current=(0,_jquery.default)(this);0==current.children().length&&current.text().toLowerCase().includes("mlang")&&(elements.push(this),data.push(current.text()))}))}));let requests=_ajax.default.call([{methodname:"filter_multilang2",args:{contextid:contextid,data:data}}],!0,!1),response=await requests[0];elements.forEach(((element,index)=>{(0,_jquery.default)(element).text(response[index])})),elements=[],data=[],onRequest=!1}_exports.init=function(){(0,_jquery.default)(filter),(0,_jquery.default)(document).on(_events.eventTypes.filterContentUpdated,filter)}}));

//# sourceMappingURL=filter.min.js.map